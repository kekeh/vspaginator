/* 
*  Name: vspaginator 
*  Description: Paginator - AngularJS reusable UI component 
*  Version: 0.0.1 
*  Author: kekeh 
*  Homepage: http://kekeh.github.io/vspaginator 
*  License: MIT 
*  Date: 2015-09-15 
*/ 
angular.module('template-vspaginator-0.0.1.html', []).run(['$templateCache', function($templateCache) {
  $templateCache.put("templates/vspaginator.html",
    "<div class=vspaginator><button class=paginatorBtn ng-style=\"{'margin-left':$index>0?'-1px':'0'}\" ng-class=\"{'selectedPaginatorBtn':b.id===paginator.visiblePageIdx+1, 'disabledPaginatorBtn':isDisabledBtn(b), 'paginatorBtnNbr': !isNavigateBtn(b), 'paginatorBtnSet': b===btnPrevSet||b===btnNextSet, 'paginatorBtnAll': b===btnFirst||b===btnLast}\" ng-click=paginatorBtnClick(b,$index) ng-repeat=\"b in paginatorButtons track by $index\">{{b.label}}</button></div>");
}]);

var _vspg=angular.module("vspaginator",["template-vspaginator-0.0.1.html"]);_vspg.constant("vspgConf",{visibleBtnCount:3,prevNextBtn:{visible:!0,labels:["back","next"]},prevNextSetBtn:{visible:!0,labels:["...","..."]},firstLastBtn:{visible:!0,labels:["first","last"]}}),_vspg.service("vspgServ",function(){var a={};return a.isUndefined=function(a){return angular.isUndefined(a)},a.isEqual=function(a,b){return angular.equals(a,b)},a.isObject=function(a){return angular.isObject(a)},a}),_vspg.directive("vspaginator",["vspgConf","vspgServ",function(a,b){return{restrict:"EA",templateUrl:"templates/vspaginator.html",scope:{opt:"=options"},controller:["$scope",function(b){b.cf=a}],link:function(a,c,d){function e(c){b.isEqual(c,a.btnFirst)?f(0,c):b.isEqual(c,a.btnPrev)?b.isEqual(a.paginator.visiblePageIdx-a.paginator.pageFirstIdx,0)?f(a.paginator.visiblePageIdx-m,c):g(a.paginator.visiblePageIdx-1,a.paginator.pageFirstIdx):b.isEqual(c,a.btnPrevSet)?f(a.paginator.pageFirstIdx-m,c):b.isEqual(c,a.btnLast)?f(a.opt.totalPages-1,c):b.isEqual(c,a.btnNext)?b.isEqual(a.paginator.visiblePageIdx-a.paginator.pageFirstIdx,m-1)?f(a.paginator.pageFirstIdx+m,c):g(a.paginator.visiblePageIdx+1,a.paginator.pageFirstIdx):b.isEqual(c,a.btnNextSet)&&f(a.paginator.pageFirstIdx+m,c)}function f(c,d){var e=0,f=0;if(c>a.paginator.visiblePageIdx)if(e=c,b.isEqual(d,a.btnLast))f=e-(c+m-a.opt.totalPages);else{var j=h(c);f=b.isEqual(j,c)?c:j}else if(c<a.paginator.visiblePageIdx&&!b.isEqual(d,a.btnFirst)){var j=i(c);e=c+m-1,f=b.isEqual(j,c)?c:j}g(e,f)}function g(c,d){var e=a.paginator.visiblePageIdx+1;a.paginator={visiblePageIdx:c,pageFirstIdx:d},j(),b.isUndefined(a.opt.pageChangedCb)||a.opt.pageChangedCb(e,c+1)}function h(b){return b+m>a.opt.totalPages?b-(b+m-a.opt.totalPages):b}function i(a){return 0>a?0:a}function j(){a.paginatorButtons.length=0,p.visible&&a.paginatorButtons.push(a.btnFirst),n.visible&&a.paginatorButtons.push(a.btnPrev),o.visible&&a.paginatorButtons.push(a.btnPrevSet);for(var b=a.paginator.pageFirstIdx;b<m+a.paginator.pageFirstIdx;b++)a.paginatorButtons.push({id:b+1,label:b+1});o.visible&&a.paginatorButtons.push(a.btnNextSet),n.visible&&a.paginatorButtons.push(a.btnNext),p.visible&&a.paginatorButtons.push(a.btnLast),k()}function k(){a.disabledButtons.length=0,b.isEqual(a.paginator.visiblePageIdx,0)&&(a.disabledButtons.push(a.btnFirst),a.disabledButtons.push(a.btnPrev)),b.isEqual(a.paginator.pageFirstIdx,0)&&a.disabledButtons.push(a.btnPrevSet),a.paginator.pageFirstIdx+m>=a.opt.totalPages&&a.disabledButtons.push(a.btnNextSet),a.paginator.visiblePageIdx>=a.opt.totalPages-1&&(a.disabledButtons.push(a.btnLast),a.disabledButtons.push(a.btnNext))}function l(){m=b.isUndefined(a.opt.visibleBtnCount)?a.cf.visibleBtnCount:a.opt.visibleBtnCount,n=b.isUndefined(a.opt.prevNextBtn)?a.cf.prevNextBtn:a.opt.prevNextBtn,p=b.isUndefined(a.opt.firstLastBtn)?a.cf.firstLastBtn:a.opt.firstLastBtn,o=b.isUndefined(a.opt.prevNextSetBtn)?a.cf.prevNextSetBtn:a.opt.prevNextSetBtn,a.btnPrev={id:"b",label:n.labels[0]},a.btnNext={id:"n",label:n.labels[1]},a.btnFirst={id:"f",label:p.labels[0]},a.btnLast={id:"l",label:p.labels[1]},a.btnPrevSet={id:"ps",label:o.labels[0]},a.btnNextSet={id:"ns",label:o.labels[1]}}a.paginator={visiblePageIdx:0,pageFirstIdx:0},a.paginatorButtons=[],a.disabledButtons=[];var m=0,n=0,o=0,p=0;a.paginatorBtnClick=function(b,c){a.isDisabledBtn(b)||(a.isNavigateBtn(b)?e(b):g(b.id-1,a.paginator.pageFirstIdx,c-2))},a.isNavigateBtn=function(c){return b.isEqual(c,a.btnFirst)||b.isEqual(c,a.btnPrev)||b.isEqual(c,a.btnPrevSet)||b.isEqual(c,a.btnNext)||b.isEqual(c,a.btnNextSet)||b.isEqual(c,a.btnLast)},a.isDisabledBtn=function(c){return a.isNavigateBtn(c)&&!b.isEqual(a.disabledButtons.indexOf(c),-1)},a.$watch("opt.totalPages",function(){g(0,0)}),a.$watch("opt.activePage",function(a){f(a-1,"")}),l()}}}]);